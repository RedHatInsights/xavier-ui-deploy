(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1061:function(e,t,r){var a=r(621);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},l=r(8)(a,n);a.locals&&(e.exports=a.locals),e.hot.accept(621,(function(){var t=r(621);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var r,a=0;for(r in e){if(!t||e[r]!==t[r])return!1;a++}for(r in t)a--;return 0===a}(a.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");l(t)})),e.hot.dispose((function(){l()}))},1081:function(e,t,r){"use strict";r.r(t);var a,n,l=r(72),o=r(2),i=r.n(o),c=r(454),s=r(478),u=r(700),d=r(699),p=r(533),m=r(642),f=r(636),v=r(576),y=r(298),E=r(258),g=r(259),b=r(267),S=r(269),h=r(130),k=r(268),F=r(264),T=r(16),I=r(255),O=r(251),M=r(220),w=r(299),D=r(5),N=r(103),R=r(272),A=r(129),C=r(112),_=r(261),W=r(113),P=r(280),V=r(281),x=r(278),L=r(283),j=r(282),B=r(207),G=r(206),U=r(212),K=(r(1061),r(468)),z=r.n(K),H=r(608),J=r(624),$=r(453),q=function(e){return e/1073741824},Q=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),X=function(e){function t(t){return e.call(this,t)||this}return Q(t,e),t.prototype.render=function(){var e=this.props.reportWorkloadInventory;return i.a.createElement("div",{className:"pf-c-content"},i.a.createElement("dl",null,i.a.createElement("dt",null,"Disk space (GiB)"),i.a.createElement("dd",null,Object($.d)(q(e.diskSpace),"gb",{fractionDigits:1})),i.a.createElement("dt",null,"Memory (GiB)"),i.a.createElement("dd",null,Object($.d)(q(e.memory),"gb",{fractionDigits:1})),i.a.createElement("dt",null,"CPU cores"),i.a.createElement("dd",null,Object($.b)(e.cpuCores,0)),i.a.createElement("dt",null,"Operating system description"),i.a.createElement("dd",null,e.osDescription),i.a.createElement("dt",null,"Red Hat Insights"),i.a.createElement("dd",null,e.insightsEnabled?"Enabled":"Disabled")))},t}(i.a.Component),Y=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),Z={provider:{key:"provider",label:"Provider"},datacenter:{key:"datacenter",label:"Datacenter"},cluster:{key:"cluster",label:"Cluster"},vmName:{key:"vmName",label:"VM name"},workload:{key:"workload",label:"Workload"},osName:{key:"osName",label:"OS type"},effort:{key:"complexity",label:"Effort"},recommendedTargetIMS:{key:"recommendedTargetIMS",label:"Recommended targets",abbreviation:"Rec. Targets"},flagIMS:{key:"flagIMS",label:"Flags IMS"}};!function(e){e.NONE="NONE",e.PROVIDER="PROVIDER",e.DATACENTER="DATACENTER",e.CLUSTER="CLUSTER",e.VM_NAME="VM_NAME",e.WORKLOAD="WORKLOAD",e.OS_NAME="OS_NAME",e.EFFORT="EFFORT",e.RECOMMENDED_TARGETS_IMS="RECOMMENDED_TARGETS_IMS",e.FLAGS_IMS="FLAGS_IMS"}(n||(n={}));var ee=[{name:Z.provider.label,value:n.PROVIDER},{name:Z.datacenter.label,value:n.DATACENTER},{name:Z.cluster.label,value:n.CLUSTER},{name:Z.vmName.label,value:n.VM_NAME},{name:Z.workload.label,value:n.WORKLOAD},{name:Z.osName.label,value:n.OS_NAME},{name:Z.effort.label,value:n.EFFORT},{name:Z.recommendedTargetIMS.label,value:n.RECOMMENDED_TARGETS_IMS},{name:Z.flagIMS.label,value:n.FLAGS_IMS}],te=new Map([[n.PROVIDER,Z.provider.label],[n.DATACENTER,Z.datacenter.label],[n.CLUSTER,Z.cluster.label],[n.VM_NAME,Z.vmName.label],[n.WORKLOAD,Z.workload.label],[n.OS_NAME,Z.osName.label],[n.EFFORT,Z.effort.label],[n.RECOMMENDED_TARGETS_IMS,Z.recommendedTargetIMS.abbreviation||Z.recommendedTargetIMS.label],[n.FLAGS_IMS,Z.flagIMS.label]]),re=function(e){function t(t){var r=e.call(this,t)||this;return r.changePage=z()((function(){r.refreshData()}),800),r.handleDownloadFilteredCSV=function(){var e=r.state,t=e.sortBy,a=e.filterValue,n=r.props,l=n.reportId;(0,n.fetchReportWorkloadInventoryFilteredCSV)(l,t.index?r.state.columns[t.index-1].key:void 0,t.direction?t.direction:void 0,r.prepareFiltersToBeSended(a)).then((function(e){var t=e.value.headers["content-disposition"],r=Object(H.a)(t),a=window.URL.createObjectURL(new Blob([e.value.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",r||"workloadInventoryReport.csv"),document.body.appendChild(n),n.click(),n.remove()}))},r.refreshFilters=function(){var e=r.props,t=e.reportId;(0,e.fetchReportWorkloadInventoryAvailableFilters)(t)},r.refreshData=function(e,t,a,n){void 0===e&&(e=r.state.page),void 0===t&&(t=r.state.perPage);var l=void 0===a?r.state.sortBy:a,o=l.direction,i=l.index;void 0===n&&(n=r.state.filterValue);var c=r.props,s=c.reportId;(0,c.fetchReportWorkloadInventory)(s,e,t,i?r.state.columns[i-1].key:void 0,o||void 0,r.prepareFiltersToBeSended(n)).then((function(){r.filtersInRowsAndCells()}))},r.filtersInRowsAndCells=function(){var e=r.props.reportWorkloadInventory.items?Object.values(r.props.reportWorkloadInventory.items):[],t=[];e.length>0&&(t=e.reduce((function(e,t,r){return e.push({isOpen:!1,cells:[t.provider,t.datacenter,t.cluster,t.vmName,{title:i.a.createElement("span",null,t.workloads.map((function(e,t){return i.a.createElement("span",{key:t},e,i.a.createElement("br",null))})))},t.osName,t.complexity,{title:i.a.createElement("span",null,t.recommendedTargetsIMS.map((function(e,t){return i.a.createElement("span",{key:t},e,i.a.createElement("br",null))})))},{title:i.a.createElement("span",null,t.flagsIMS.map((function(e,t){return i.a.createElement("span",{key:t},e,i.a.createElement("br",null))})))}]},{parent:2*r,fullWidth:!1,cells:[{title:i.a.createElement(X,{reportWorkloadInventory:t})}]}),e}),[])),r.setState({rows:t})},r.onSort=function(e,t,a){var n=r.props.reportId,l=r.state,o=l.perPage,i=l.filterValue,c=t?r.state.columns[t-1].key:void 0,s=a||void 0,u=r.prepareFiltersToBeSended(i);r.props.fetchReportWorkloadInventory(n,1,o,c,s,u).then((function(){r.setState({page:1,sortBy:{index:t,direction:a}}),r.filtersInRowsAndCells()}))},r.onPageChange=function(e,t,a){r.setState({page:t}),a?r.changePage():r.refreshData(t)},r.onSetPage=function(e,t){return"pf-c-form-control"===e.target.className||r.onPageChange(e,t,!1)},r.onPageInput=function(e,t){return r.onPageChange(e,t,!0)},r.onPerPageSelect=function(e,t){var a=r.state.page,n=r.props.reportWorkloadInventory.total;a*t>n&&(a=Math.floor(n/t)+1),r.setState({page:a,perPage:t}),r.refreshData(a,t)},r.onRowCollapse=function(e,t,a){var n=r.state.rows;n[t].isOpen=a,r.setState({rows:n})},r.renderPagination=function(){var e=r.state,t=e.page,a=e.perPage,n=r.props.reportWorkloadInventory.total;return i.a.createElement(y.a,{itemCount:n,perPage:a,page:t,onSetPage:r.onSetPage,onPageInput:r.onPageInput,onPerPageSelect:r.onPerPageSelect})},r.renderResultsTable=function(){var e=r.state,t=e.rows,a=e.columns,n=e.sortBy;return i.a.createElement(s.b,{"aria-label":"Workload inventory",onCollapse:r.onRowCollapse,rows:t,cells:a,sortBy:n,onSort:r.onSort,className:"table-vertical-align-middle"},i.a.createElement(u.a,null),i.a.createElement(d.a,null),i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:10},r.renderPagination()))))},r.renderNoResults=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,null,i.a.createElement(g.a,null,i.a.createElement(b.a,{variant:b.b.full},i.a.createElement(S.a,{icon:B.b}),i.a.createElement(h.a,{headingLevel:"h5",size:"lg"},"No results found"),i.a.createElement(k.a,null,"No results match the search criteria")))))},r.renderFilterTypeDropdown=function(){var e=r.state,t=e.filterDropDownOpen,a=e.filterType;return i.a.createElement(F.a,{position:T.d.left,className:"topology-view-filter-dropdown",toggle:i.a.createElement(I.a,{onToggle:r.onFilterDropDownToggle},i.a.createElement(G.b,{className:"pf-u-mr-sm"}),a.name),isOpen:t,dropdownItems:ee.map((function(e,t){return i.a.createElement(O.a,{key:t,onClick:function(t){r.onFilterTypeSelect(t,e.name,e.value)}},e.name)}))})},r.onFilterDropDownToggle=function(e){r.setState({filterDropDownOpen:e})},r.onFilterTypeSelect=function(e,t,a){e.preventDefault(),r.setState({filterType:{name:t,value:a},filterDropDownOpen:!1})},r.renderFilterInput=function(){var e=r.state.filterType,t=r.props.reportWorkloadInventoryAvailableFilters;if(t)switch(e.value){case n.PROVIDER:return r.renderSecondaryFilterDropdown(e,t.providers);case n.DATACENTER:return r.renderSecondaryFilterDropdown(e,t.datacenters);case n.CLUSTER:return r.renderSecondaryFilterDropdown(e,t.clusters);case n.WORKLOAD:return r.renderSecondaryFilterDropdown(e,t.workloads);case n.EFFORT:return r.renderSecondaryFilterDropdown(e,t.complexities);case n.RECOMMENDED_TARGETS_IMS:return r.renderSecondaryFilterDropdown(e,t.recommendedTargetsIMS);case n.FLAGS_IMS:return r.renderSecondaryFilterDropdown(e,t.flagsIMS);case n.VM_NAME:return r.renderSecondaryFilterInputText(e);case n.OS_NAME:return r.renderSecondaryFilterDropdown(e,t.osNames);default:return i.a.createElement(M.a,{type:"text","aria-label":"filter text input",readOnly:!0,placeholder:"Filter by...",value:""})}},r.onSecondaryFilterDropdownToggle=function(e){r.setState({secondaryFilterDropDownOpen:e})},r.getMapValue=function(e,t){return t.has(e)||t.set(e,[]),t.get(e)||[]},r.prepareFiltersToBeSended=function(e){var t=new Map;return e.forEach((function(e,r){var a;switch(r){case n.PROVIDER:a=Z.provider.key;break;case n.DATACENTER:a=Z.datacenter.key;break;case n.CLUSTER:a=Z.cluster.key;break;case n.WORKLOAD:a=Z.workload.key;break;case n.EFFORT:a=Z.effort.key;break;case n.RECOMMENDED_TARGETS_IMS:a=Z.recommendedTargetIMS.key;break;case n.FLAGS_IMS:a=Z.flagIMS.key;break;case n.VM_NAME:a=Z.vmName.key;break;case n.OS_NAME:a=Z.osName.key;break;default:a=r}t.set(a,e)})),t},r.applyFilterAndSearch=function(e){r.setState({filterValue:e});var t=r.props.reportId,a=r.state.perPage,n=r.state.sortBy,l=n.direction,o=n.index,i=o?r.state.columns[o-1].key:void 0,c=l||void 0,s=r.prepareFiltersToBeSended(e);r.props.fetchReportWorkloadInventory(t,1,a,i,c,s).then((function(){r.setState({page:1}),r.filtersInRowsAndCells()}))},r.onSecondaryFilterDropdownSelect=function(e,t){var a=r.state.filterValue,n=r.getMapValue(t.value,a),l=new Map(a);n.find((function(t){return t===e}))?l.set(t.value,n.filter((function(t){return t!==e}))):l.set(t.value,n.concat([e])),r.applyFilterAndSearch(l)},r.renderSecondaryFilterDropdown=function(e,t){var a=r.state,n=a.secondaryFilterDropDownOpen,l=a.filterValue,o=r.getMapValue(e.value,l);if(0===t.length){return i.a.createElement(w.a,{variant:D.f.single,"aria-label":"Select "+e.name+" Input",onToggle:r.onSecondaryFilterDropdownToggle,onSelect:function(){},isExpanded:n,placeholderText:"Filter by "+e.name,ariaLabelledBy:e.name},[i.a.createElement(N.a,{key:"EmptyKey",value:"No values available"})])}return i.a.createElement(w.a,{variant:D.f.checkbox,"aria-label":"Select "+e.name+" Input",onToggle:r.onSecondaryFilterDropdownToggle,onSelect:function(t,a){r.onSecondaryFilterDropdownSelect(a,e)},isExpanded:n,selections:o,placeholderText:"Filter by "+e.name,ariaLabelledBy:e.name},t.map((function(e,t){return i.a.createElement(N.a,{key:t,value:e})})))},r.renderSecondaryFilterInputText=function(e){var t=r.state.filterValue;return i.a.createElement(J.a,{initialValues:{filterText:""},onSubmit:function(a,n){var l=n.resetForm,o=a.filterText,i=r.getMapValue(e.value,t),c=new Map(t);i.find((function(e){return e===o}))||(c.set(e.value,i.concat([o])),r.applyFilterAndSearch(c)),l()}},(function(t){var r=t.values,a=t.handleChange,n=t.handleBlur,l=t.handleSubmit;return i.a.createElement(R.a,{onSubmit:l},i.a.createElement(M.a,{type:"search",name:"filterText","aria-label":"search text input",onChange:function(e,t){a(t)},onBlur:n,value:r.filterText,placeholder:"Filter by "+e.name+"..."}),i.a.createElement(A.a,{type:"submit",className:"pf-u-hidden"},"Submit"))}))},r.deleteChipItem=function(e,t){var a=r.state.filterValue,n=r.getMapValue(e,r.state.filterValue),l=new Map(a),o=n.filter((function(e){return e!==t}));l.set(e,o),r.applyFilterAndSearch(l)},r.clearChips=function(){r.setState({filterType:{name:"Filter",value:n.NONE}}),r.applyFilterAndSearch(new Map)},r.reportFilterChips=function(){var e=r.state.filterValue,t=[];return e.forEach((function(e,r){e.length>0&&t.push({key:r,value:e})})),i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{withToolbar:!0},t.map((function(e){return i.a.createElement(_.a,{key:e.key,categoryName:te.get(e.key)},e.value.map((function(t){return i.a.createElement(W.a,{key:t,onClick:function(){r.deleteChipItem(e.key,t)}},t)})))}))),t.length>0&&i.a.createElement(i.a.Fragment,null," ",i.a.createElement(A.a,{variant:A.c.link,onClick:r.clearChips},"Clear filters")))},r.renderWorkloadInventory=function(){var e=r.props.reportWorkloadInventory;return i.a.createElement(i.a.Fragment,null,e.total>0?r.renderResultsTable():r.renderNoResults())},r.renderWorkloadInventorySkeleton=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{gutter:"md"},i.a.createElement(V.a,{isFilled:!1},i.a.createElement(c.SkeletonTable,{colSize:9,rowSize:10}))))},r.renderFetchError=function(){return i.a.createElement(x.a,null,i.a.createElement(b.a,{variant:b.b.large},i.a.createElement(S.a,{icon:U.b}),i.a.createElement(h.a,{headingLevel:h.b.h5,size:"lg"},"Error"),i.a.createElement(k.a,null,"Something unexpected happend, please try again!"),i.a.createElement(A.a,{variant:"primary",onClick:function(){r.refreshData()}},"Retry")))},r.state={page:1,perPage:10,columns:[{title:Z.provider.label,key:Z.provider.key,props:{className:"vertical-align-middle"},cellFormatters:[p.b],transforms:[Object(m.a)("10")]},{title:Z.datacenter.label,key:Z.datacenter.key,props:{className:"vertical-align-middle"},transforms:[Object(m.a)("10")]},{title:Z.cluster.label,key:Z.cluster.key,props:{className:"vertical-align-middle"},transforms:[Object(m.a)("10")]},{title:Z.vmName.label,key:Z.vmName.key,props:{className:"vertical-align-middle"},transforms:[f.a,Object(m.a)("15")]},{title:Z.workload.label,key:Z.workload.key,props:{className:"vertical-align-middle"},transforms:[Object(m.a)("10")],columnTransforms:[Object(v.b)(v.a.hiddenOnMd,v.a.visibleOnLg)]},{title:Z.osName.label,key:Z.osName.key,props:{className:"vertical-align-middle"},transforms:[f.a,Object(m.a)("10")],columnTransforms:[Object(v.b)(v.a.hiddenOnMd,v.a.visibleOnLg)]},{title:Z.effort.label,key:Z.effort.key,props:{className:"vertical-align-middle"},transforms:[f.a,Object(m.a)("10")],columnTransforms:[Object(v.b)(v.a.hiddenOnMd,v.a.visibleOnLg)]},{title:Z.recommendedTargetIMS.label,key:Z.recommendedTargetIMS.key,props:{className:"vertical-align-middle"},transforms:[],columnTransforms:[Object(v.b)(v.a.hiddenOnMd,v.a.visibleOnLg)]},{title:Z.flagIMS.label,key:Z.flagIMS.key,props:{className:"vertical-align-middle"},transforms:[],columnTransforms:[Object(v.b)(v.a.hiddenOnMd,v.a.visibleOnLg)]}],rows:[],sortBy:{},filterDropDownOpen:!1,secondaryFilterDropDownOpen:!1,filterType:{name:"Filter",value:n.NONE},filterValue:new Map},r}return Y(t,e),t.prototype.componentDidMount=function(){this.refreshData(),this.refreshFilters()},t.prototype.render=function(){this.state;var e=this.props,t=e.reportWorkloadInventoryFetchStatus,r=e.reportWorkloadInventoryFilteredCSVFetchStatus;if(t.error)return this.renderFetchError();var a="complete"===t.status;return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.TableToolbar,{className:"pf-u-justify-content-space-between"},i.a.createElement(L.a,null,i.a.createElement(j.a,null,this.renderFilterTypeDropdown()),i.a.createElement(j.a,{className:"pf-u-mr-md"},this.renderFilterInput()),i.a.createElement(j.a,{className:"pf-u-mr-md"},i.a.createElement(A.a,{variant:"primary",onClick:this.handleDownloadFilteredCSV,isDisabled:"inProgress"===r.status},"inProgress"===r.status?"Exporting CSV":"Export as CSV"))),i.a.createElement(L.a,null,i.a.createElement(j.a,null,this.renderPagination()))),i.a.createElement(c.TableToolbar,{className:"pf-u-justify-content-space-between"},i.a.createElement(L.a,null,i.a.createElement(j.a,null,this.reportFilterChips()))),a?this.renderWorkloadInventory():this.renderWorkloadInventorySkeleton())},t}(i.a.Component),ae=r(13),ne={fetchReportWorkloadInventory:ae.g,fetchReportWorkloadInventoryFilteredCSV:ae.i,fetchReportWorkloadInventoryAvailableFilters:ae.h};t.default=Object(l.connect)((function(e){var t=e.reportState;return{reportWorkloadInventory:t.reportWorkloadInventory,reportWorkloadInventoryFetchStatus:t.reportWorkloadInventoryFetchStatus,reportWorkloadInventoryFilteredCSVFetchStatus:t.reportWorkloadInventoryFilteredCSVFetchStatus,reportWorkloadInventoryAvailableFilters:t.reportWorkloadInventoryAvailableFilters,reportWorkloadInventoryAvailableFiltersFetchStatus:t.reportWorkloadInventoryAvailableFiltersFetchStatus}}),ne)(re)},468:function(e,t,r){var a=r(452),n=r(513),l=r(481),o="Expected a function",i=Math.max,c=Math.min;e.exports=function(e,t,r){var s,u,d,p,m,f,v=0,y=!1,E=!1,g=!0;if("function"!=typeof e)throw new TypeError(o);function b(t){var r=s,a=u;return s=u=void 0,v=t,p=e.apply(a,r)}function S(e){var r=e-f;return void 0===f||r>=t||r<0||E&&e-v>=d}function h(){var e=n();if(S(e))return k(e);m=setTimeout(h,function(e){var r=t-(e-f);return E?c(r,d-(e-v)):r}(e))}function k(e){return m=void 0,g&&s?b(e):(s=u=void 0,p)}function F(){var e=n(),r=S(e);if(s=arguments,u=this,f=e,r){if(void 0===m)return function(e){return v=e,m=setTimeout(h,t),y?b(e):p}(f);if(E)return clearTimeout(m),m=setTimeout(h,t),b(f)}return void 0===m&&(m=setTimeout(h,t)),p}return t=l(t)||0,a(r)&&(y=!!r.leading,d=(E="maxWait"in r)?i(l(r.maxWait)||0,t):d,g="trailing"in r?!!r.trailing:g),F.cancel=function(){void 0!==m&&clearTimeout(m),v=0,s=f=u=m=void 0},F.flush=function(){return void 0===m?p:k(n())},F}},481:function(e,t){e.exports=function(e){return e}},513:function(e,t,r){var a=r(480);e.exports=function(){return a.Date.now()}},608:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(e){var t="";if(e&&-1!==e.indexOf("attachment")){var r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e);null!=r&&r[1]&&(t=r[1].replace(/['"]/g,""))}return t},n=function(e){return e.replace(/(\.[^/.]+)+$/,"")}},621:function(e,t,r){(e.exports=r(7)(!1)).push([e.i,".vertical-align-middle {\n  vertical-align: middle !important; }\n\n.table-vertical-align-middle.pf-c-table tr > *:first-child {\n  vertical-align: middle !important;\n  padding-bottom: 20px !important; }\n",""])}}]);
//# sourceMappingURL=WorkloadInventory.js.map