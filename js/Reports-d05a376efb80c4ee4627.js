(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{418:function(e,t,a){"use strict";var r=a(60),n=a.n(r),l=a(61),o=a.n(l),s=a(76),i=a.n(s),c=a(77),u=a.n(c),p=a(78),m=a.n(p),h=a(2),f=a.n(h),g=a(400),d=function(e){function t(e){return n()(this,t),i()(this,u()(t).call(this,e))}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.children;return f.a.createElement(h.Fragment,null,f.a.createElement(g.PageHeader,null,f.a.createElement(g.PageHeaderTitle,{title:"Reports"})),f.a.createElement(g.Main,{style:this.props.mainStyle},e))}}]),t}(h.Component);t.a=d},458:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,".pf-c-empty-state > .dropzone {\n  margin-top: var(--pf-c-empty-state--c-button--MarginTop); }\n\n.error {\n  color: var(--pf-global--danger-color--100) !important; }\n\n.success {\n  color: var(--pf-global--success-color--100) !important; }\n",""])},459:function(e,t,a){"use strict";var r=a(418),n=a(274);t.a=Object(n.a)(r.a)},560:function(e,t,a){var r=a(458);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},l=a(6)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(458,function(){var t=a(458);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");l(t)}),e.hot.dispose(function(){l()})},708:function(e,t,a){"use strict";a.r(t);var r=a(66),n=a(60),l=a.n(n),o=a(61),s=a.n(o),i=a(76),c=a.n(i),u=a(77),p=a.n(u),m=a(78),h=a.n(m),f=a(2),g=a.n(f),d=a(457),E=a(400),v=a(180),S=a(229),b=a(221),R=a(183),D=a(216),T=a(217),P=a(224),y=a(226),C=a(109),w=a(225),N=a(243),F=a(242),x=a(177),k=a(541),I=a(706),A=a(702),M=(a(560),a(459)),O=a(249),j=a(252),z=a(253),B=a(222),U=a(499),H=a.n(U),L=a(542),G=5e3,J=function(e){function t(e){var a;return l()(this,t),(a=c()(this,p()(t).call(this,e))).pullTimer=void 0,a.startTimer=function(e){a.pullTimer&&clearInterval(a.pullTimer),a.pullTimer=setInterval(e,G)},a.stopTimer=function(){clearInterval(a.pullTimer)},a.handleDeleteReport=function(e){var t=a.props,r=t.deleteReport,n=t.showDeleteDialog,l=t.closeDeleteDialog;n({name:e.fileName,type:"report",onDelete:function(){r(e.id,e.fileName).then(function(){l(),a.refreshData()})},onCancel:function(){l()}})},a.renderReportStatus=function(e){switch(e.status){case"CREATED":return g.a.createElement("p",null,g.a.createElement(O.a,{className:"success"})," Report created - ",new Date(e.creationDate).toUTCString());case"FAILED":return g.a.createElement("p",null,g.a.createElement(j.a,{className:"error"})," Report failed - ",new Date(e.creationDate).toUTCString());case"IN_PROGRESS":return g.a.createElement("p",null,g.a.createElement(z.a,{className:"progress"})," Analyzing the upload file");default:return null}},a.renderReportActions=function(e){switch(e.status){case"CREATED":case"FAILED":return g.a.createElement(v.a,{variant:v.c.secondary,onClick:function(){return a.handleDeleteReport(e)}},"Delete");case"IN_PROGRESS":return"";default:return null}},a.refreshData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.perPage,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.filterText;a.props.fetchReports(e,t,r).then(function(){a.filtersInRowsAndCells(),a.state.isFirstFetchReportsCall&&a.setState({isFirstFetchReportsCall:!1})})},a.changePage=H()(function(){a.refreshData()},800),a.onPageChange=function(e,t,r){a.setState({page:t}),r?a.changePage():a.refreshData(t)},a.onSetPage=function(e,t){return"pf-c-form-control"===e.target.className||a.onPageChange(e,t,!1)},a.onPageInput=function(e,t){return a.onPageChange(e,t,!0)},a.onPerPageSelect=function(e,t){var r=a.state.page,n=a.props.reports.total;r*t>n&&(r=Math.floor(n/t)+1),a.setState({page:r,perPage:t}),a.refreshData(r,t)},a.handleSearchSubmit=function(e){var t=e.filterText;a.setState({filterText:t.trim()}),a.refreshData()},a.renderSearchBox=function(){return g.a.createElement(L.a,{initialValues:{filterText:""},validate:function(){return{}},onSubmit:a.handleSearchSubmit},function(e){var t=e.values,a=e.handleChange,r=e.handleBlur,n=e.handleSubmit;return g.a.createElement(S.a,{onSubmit:n},g.a.createElement(b.a,null,g.a.createElement(R.a,{type:"search",id:"filterText",name:"filterText","aria-label":"search text input",onChange:function(e,t){return a(t)},onBlur:r,value:t.filterText,placeholder:"Filter by name..."}),g.a.createElement(v.a,{type:"submit",variant:v.c.tertiary,"aria-label":"search button for search input"},g.a.createElement(B.a,null))))})},a.state={filterText:"",page:1,perPage:10,columns:["Name","Status",{title:"",props:{className:"pf-u-text-align-center"}}],rows:[],isFirstFetchReportsCall:!0},a}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.refreshData(),this.startTimer(this.refreshData)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.reportsFetchStatus,a=e.reports,r=this.state.isFirstFetchReportsCall;0===a.total&&r&&"complete"===t.status&&this.props.history.push("/no-reports")}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"filtersInRowsAndCells",value:function(){var e=this,t=this.props.reports.items?Object.values(this.props.reports.items):[],a=[];t.length>0&&(a=t.map(function(t){return[{title:g.a.createElement(d.a,{to:"/reports/".concat(t.id)},t.fileName)},{title:e.renderReportStatus(t)},{title:e.renderReportActions(t)}]})),this.setState({rows:a})}},{key:"renderNoResults",value:function(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(D.a,null,g.a.createElement(T.a,null,g.a.createElement(P.a,{variant:P.b.full},g.a.createElement(y.a,{icon:B.a}),g.a.createElement(C.a,{headingLevel:"h5",size:"lg"},"No results found"),g.a.createElement(w.a,null,"No results match the search criteria")))))}},{key:"renderResultsTable",value:function(){var e=this.state,t=e.rows,a=e.columns;return g.a.createElement(k.d,{"aria-label":"Reports list",rows:t,cells:a,gridBreakPoint:k.b.gridMd},g.a.createElement(I.a,null),g.a.createElement(A.a,null))}},{key:"render",value:function(){var e=this.state,t=e.isFirstFetchReportsCall,a=e.page,r=e.perPage,n=this.props.reports.total;return t?g.a.createElement(M.a,null,g.a.createElement(E.SkeletonTable,{colSize:3,rowSize:10})):g.a.createElement(M.a,null,g.a.createElement(E.TableToolbar,{className:"pf-u-justify-content-space-between"},g.a.createElement(N.a,null,g.a.createElement(F.a,{className:"pf-u-mr-xl"},this.renderSearchBox()),g.a.createElement(F.a,{className:"pf-u-mr-md"},g.a.createElement(d.a,{to:"/reports/upload",className:"pf-c-button pf-m-primary"},"Create"))),g.a.createElement(N.a,null,g.a.createElement(F.a,null,g.a.createElement(x.b,{itemCount:n,perPage:r,page:a,onSetPage:this.onSetPage,onPageInput:this.onPageInput,onPerPageSelect:this.onPerPageSelect})))),n>0?this.renderResultsTable():this.renderNoResults())}}]),t}(g.a.Component),_=a(274),V=a(28),W=a(89),q={fetchReports:V.e,deleteReport:V.b,showDeleteDialog:W.c,closeDeleteDialog:W.a};t.default=Object(_.a)(Object(r.connect)(function(e){var t=e.reportState;return{reports:t.reports,reportsFetchStatus:t.reportsFetchStatus}},q)(J))}}]);
//# sourceMappingURL=../sourcemaps/Reports.js.map